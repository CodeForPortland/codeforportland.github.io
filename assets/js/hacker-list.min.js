!function(a){var b=b||{};b.hackers=[],b.initData=function(a){a.map(function(a){return b.hackers.push(a),a.skills},self).reduce(function(a,b){return a.concat(b.filter(function(b){return a.every(function(a){return b.name!=a.name})}))}).sort(function(a,b){return a.name<b.name?-1:1}).forEach(function(a){void 0!=a&&b.addSkill(a)},self),b.filterHackers()},b.skillTemplate=a("#skill-filter-template"),b.hackerTemplate=a("#hacker-template"),b.hackerSkillTemplate=a("#hacker-details-skill"),b.addSkill=function(c){a("#skill-list").append(a(b.skillTemplate.html().replace(/\${skill}/g,c.name)).clone())},b.fetchHackerData=function(){a.ajax({url:"/hackers/hackers.html",dataType:"json",success:function(a){b.initData(a)},error:function(a,b,c){console.log("xhr: "+a),console.log("status: "+b),console.log("error: "+c)}})},b.filterHackers=function(){b.clearHackers(),b.hackers.sort(function(a,b){return a.name<b.name?-1:1}).filter(function(a){return b.matchesFilters(a)}).forEach(function(a){b.addHackerToView(a)})},b.addHackerToView=function(c){var d=a(b.hackerTemplate.html().replace(/\${name}/g,c.name)).clone();c.skills.sort(function(a,b){return a.name<b.name?-1:1}).forEach(function(c){a(".hacker-details",d).append(b.hackerSkillTemplate.html().replace(/\${name}/g,c.name).replace(/\${level}/g,c.level)).clone()}),a("#hacker-list").append(d)},b.matchesFilters=function(a){return 0==Object.keys(b.enabledFilters).length?!0:Object.keys(b.enabledFilters).filter(function(a){return 1==b.enabledFilters[a]}).every(function(b){var c=a.skills.filter(function(a){return a.name==b?!0:void 0});return c.length>0})},b.clearHackers=function(){a("#hacker-list").html("")},b.bindEvents=function(){a("#skill-list").on("click",".skill-link",function(){a(this).toggleClass("selected");var c=a(this).attr("data-filter");return a(this).hasClass("selected")?b.enabledFilters[c]=!0:delete b.enabledFilters[c],b.filterHackers(),!1}),a("#hacker-list").on("click",".hacker-link",function(){return a(".hacker-details",a(this).parents(".hacker")).toggleClass("hacker-details-showing"),!1})},b.enabledFilters={},a(document).ready(function(){b.fetchHackerData(),b.bindEvents()})}(jQuery);